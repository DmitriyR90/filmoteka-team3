!function(){function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in i)return i[e].exports;if(e in s){var t=s[e];delete s[e];var n={id:e,exports:{}};return i[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){s[e]=t},n.parcelRequired7c6=a),a.register("iE7OH",(function(t,n){var i,s;e(t.exports,"register",(function(){return i}),(function(e){return i=e})),e(t.exports,"resolve",(function(){return s}),(function(e){return s=e}));var a={};i=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)a[t[n]]=e[t[n]]},s=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a.register("7raIt",(function(e,t){e.exports=a("aNJCr").getBundleURL("6rRUj")+a("iE7OH").resolve("iXtly")})),a.register("aNJCr",(function(t,n){var i;e(t.exports,"getBundleURL",(function(){return i}),(function(e){return i=e}));var s={};function a(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}i=function(e){var t=s[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return a(e[2])}return"/"}(),s[e]=t),t}})),a("iE7OH").register(JSON.parse('{"6rRUj":"librarypage.49b865d8.js","iXtly":"noposter.751b8d89.jpg","iLoYJ":"index.fd33b291.js"}'));var o=a("bpxeT"),r=a("2TvXO");a("jHF6Y");var l=a("6Urw1"),c=a("c69b4"),u=a("3SEMc"),d=((0,l.initializeApp)({apiKey:"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc",authDomain:"filmoteka-bdb19.firebaseapp.com",projectId:"filmoteka-bdb19",storageBucket:"filmoteka-bdb19.appspot.com",messagingSenderId:"1051248700372",appId:"1:1051248700372:web:2dc6796345cd1c6fa94441"}),(0,c.getFirestore)()),m=(0,u.getAuth)(),v=document.querySelector(".info"),p=document.querySelector(".movie-list"),f=document.querySelector(".queue-btn"),b=document.querySelector(".watched-btn"),h=document.querySelector(".loader"),g=document.querySelectorAll(".pagination-btn"),_=document.querySelector(".pagination-btn__main"),L=document.querySelector(".pagination-btn__arrow-left"),y=document.querySelector(".pagination-btn__arrow-right"),x=document.querySelector(".pagination-list"),w=document.querySelector(".pagination"),S=1,N=1;function I(){b.classList.add("active-btn"),f.classList.remove("active-btn"),(0,u.onAuthStateChanged)(m,(function(e){if(e)C(e.uid).then((function(e){return e})).then((function(e){var t=e.filmsWatched;if(0===t.length)return w.classList.add("is-stealth"),v.classList.remove("is-stealth"),void A(t);if(1!==(N=Math.ceil(t.length/20))){var n=20*S,i=n-20;return A(t=e.filmsWatched.slice(i,n)),w.classList.remove("is-stealth"),void H(S,N)}A(t),S=1,w.classList.remove("is-stealth"),H(S,N)}));else console.log("user is logout")}))}function q(e){S=1,h.classList.remove("is-hidden__spinner"),e.target===b?(h.classList.add("is-hidden__spinner"),b.classList.add("active-btn"),f.classList.remove("active-btn")):e.target===f&&(b.classList.remove("active-btn"),f.classList.add("active-btn"),h.classList.add("is-hidden__spinner"));var t=e.target.id;(0,u.onAuthStateChanged)(m,(function(e){if(e)C(e.uid).then((function(e){return e})).then((function(e){var n=e[t];if(0===n.length)return w.classList.add("is-stealth"),v.classList.remove("is-stealth"),void k(n);if(1===(N=Math.ceil(n.length/20)))k(n),S=1,console.log(N),w.classList.remove("is-stealth"),H(S,N);else{var i=20*S,s=i-20;console.log(i),k(n=e[t].slice(s,i)),console.log(N),w.classList.remove("is-stealth"),H(S,N)}}));else console.log("user is logout")}))}function C(e){return E.apply(this,arguments)}function E(){return(E=t(o)(t(r).mark((function e(n){var i,s;return t(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getDoc)((0,c.doc)(d,"users","".concat(n)));case 2:if(!(i=e.sent).exists()){e.next=6;break}return s=i.data(),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){if(p.innerHTML="",e.length<1)return p.innerHTML="",v.classList.remove("is-stealth"),void w.classList.add("is-stealth");v.classList.add("is-stealth"),T(e),w.classList.remove("is-stealth"),H(S,N)}function T(e){var t;t=e.map((function(e){var t=e.img,n=e.id,i=e.title,s=e.genres,o=e.date,r=e.vote_average;return'<li class="movie-item">\n                    <img class="movie-img" src="'.concat(function(e){var t=new Image;t.src=a("7raIt");var n=e;null!==e&&""!==e||(n=t.src);return n}(t),'" data-id="').concat(n,'" alt="').concat(i,'" width="280">\n                    <h2 class="movie-title">').concat(i,'</h2>\n                    <p class="movie-description">').concat(function(e){if(""===e)return"Unknown genre";if(e.includes(",")){var t=e.split(",");return t.length>2?t.slice(0,2).join(", ")+", others...":t.join(", ")}return e}(s)," | ").concat(o,'</p><span class="movie-votes__first modal-votes">').concat(r,"</span>\n                </li>")})).join(""),p.insertAdjacentHTML("beforeend",t)}function A(e){p.innerHTML="",0===e.length?v.classList.remove("is-stealth"):(v.classList.add("is-stealth"),T(e))}function H(e,t){g[0].textContent=Number.parseInt(e)-4>0?1:"",Number.parseInt(e)-3==1?g[1].textContent=1:Number.parseInt(e)-3>0?g[1].textContent="...":g[1].textContent="",g[2].textContent=Number.parseInt(e)-2>0?Number.parseInt(e)-2:"",g[3].textContent=Number.parseInt(e)-1>0?Number.parseInt(e)-1:"",_.textContent=Number.parseInt(e),g[5].textContent=Number.parseInt(e)+1<=Number.parseInt(t)?Number.parseInt(e)+1:"",g[6].textContent=Number.parseInt(e)+2<=Number.parseInt(t)?Number.parseInt(e)+2:"",Number.parseInt(e)+3===Number.parseInt(t)?g[7].textContent=Number.parseInt(t):Number.parseInt(e)+3<=Number.parseInt(t)?g[7].textContent="...":g[7].textContent="",g[8].textContent=Number.parseInt(e)+4<=Number.parseInt(t)?Number.parseInt(t):"",g[5].textContent?y.classList.remove("disabled"):y.classList.add("disabled"),g[3].textContent?L.classList.remove("disabled"):L.classList.add("disabled")}function j(){if(b.classList.contains("active-btn"))return I(),void window.scrollTo({top:0,behavior:"smooth"});M(),window.scrollTo({top:0,behavior:"smooth"})}function M(){b.classList.remove("active-btn"),f.classList.add("active-btn"),console.log("render11"),(0,u.onAuthStateChanged)(m,(function(e){if(e)C(e.uid).then((function(e){return e})).then((function(e){var t=e.filmsQueue;if(0===t.length)return w.classList.add("is-stealth"),v.classList.remove("is-stealth"),void A(t);if(1!==(N=Math.ceil(t.length/20))){var n=20*S,i=n-20;return console.log(n),A(t=e.filmsQueue.slice(i,n)),console.log(N),w.classList.remove("is-stealth"),void H(S,N)}A(t),S=1,console.log(N),w.classList.remove("is-stealth"),H(S,N)}));else console.log("user is logout")}))}function O(){return(O=t(o)(t(r).mark((function e(n){var i;return t(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.target.dataset.id,"IMG"===n.target.nodeName){e.next=3;break}return e.abrupt("return");case 3:document.querySelector(".drop-box").classList.remove("drop-box--is-hidden"),document.querySelector(".button-up").classList.add("is-hidden"),(0,u.onAuthStateChanged)(m,(function(e){if(e){var t=e.uid;C(t).then((function(e){return e})).then((function(e){if(b.classList.contains("active-btn")){var n=e.filmsWatched.find((function(e){return e.id===Number(i)}));D(n);var s=document.querySelector("#filmsWatchedDelete");s.addEventListener("click",(function(){(0,c.updateDoc)((0,c.doc)(d,"users",t),{filmsWatched:(0,c.arrayRemove)(n)}),s.disabled=!0,s.classList.add("button-disabled"),I()}))}else if(f.classList.contains("active-btn")){var a=e.filmsQueue.find((function(e){return e.id===Number(i)}));R(a);var o=document.querySelector("#filmsQueueDelete");o.addEventListener("click",(function(){(0,c.updateDoc)((0,c.doc)(d,"users",t),{filmsQueue:(0,c.arrayRemove)(a)}),o.disabled=!0,o.classList.add("button-disabled"),M()}))}}))}else console.log("user is logout")}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){document.querySelector(".modal-thumb").insertAdjacentHTML("beforeend",function(e){return'<img class="modal__img" src="'.concat(e.img,'" alt="" width="240">\n                <div class="modal__description-thumb">\n                    <h2 class="modal__title">').concat(e.title,'</h2>\n                    <ul class="movie-data">\n                        <li>\n                            <ul class="movie-data__name">\n                                <li>Vote / Votes</li>\n                                <li>Popularity</li>\n                                <li>Original Title</li>\n                                <li>Genre</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <ul class="movie-data__content">\n                                <li class="movie-data__item">\n                                    <span class="movie-votes__first">').concat(e.vote_average,'</span> / <span class="movie-votes__sec">').concat(e.vote_count,'</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-popularity__item">').concat(e.popularity,'</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-orig-title__item">').concat(e.original_title,'</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-genre__item">\n                                      ').concat(e.genres,'\n                                    </span>\n                                </li>\n                            </ul>\n                        </li>  \n                    </ul>\n                    \n                    <p class="movie-about">About</p>\n                    <p class="movie-about-text">').concat(e.overview,'</p>\n                    <ul class="modal-btns">\n                        <li class="modal-btns__item">\n                            <button class="button add-watched-btn delete" type="button" id="filmsWatchedDelete">Delete from Watched</button>\n                        </li>\n                        \n                    </ul>\n                </div>')}(e)),document.querySelector("body").classList.add("overflow-hidden")}function R(e){document.querySelector(".modal-thumb").insertAdjacentHTML("beforeend",function(e){return'<img class="modal__img" src="'.concat(e.img,'" alt="" width="240">\n              <div class="modal__description-thumb">\n                  <h2 class="modal__title">').concat(e.title,'</h2>\n                  <ul class="movie-data">\n                      <li>\n                          <ul class="movie-data__name">\n                              <li>Vote / Votes</li>\n                              <li>Popularity</li>\n                              <li>Original Title</li>\n                              <li>Genre</li>\n                          </ul>\n                      </li>\n                      <li>\n                          <ul class="movie-data__content">\n                              <li class="movie-data__item">\n                                  <span class="movie-votes__first">').concat(e.vote_average,'</span> / <span class="movie-votes__sec">').concat(e.vote_count,'</span>\n                              </li>\n                              <li class="movie-data__item">\n                                  <span class="movie-popularity__item">').concat(e.popularity,'</span>\n                              </li>\n                              <li class="movie-data__item">\n                                  <span class="movie-orig-title__item">').concat(e.original_title,'</span>\n                              </li>\n                              <li class="movie-data__item">\n                                  <span class="movie-genre__item">\n                                    ').concat(e.genres,'\n                                  </span>\n                              </li>\n                          </ul>\n                      </li>  \n                  </ul>\n                  \n                  <p class="movie-about">About</p>\n                  <p class="movie-about-text">').concat(e.overview,'</p>\n                  <ul class="modal-btns">\n                      <li class="modal-btns__item">\n                          <button class="button add-watched-btn delete" type="button" id="filmsQueueDelete">Delete from queue</button>\n                      </li>\n                  </ul>\n              </div>')}(e)),document.querySelector("body").classList.add("overflow-hidden")}function U(){document.querySelector(".drop-box").classList.add("drop-box--is-hidden"),document.querySelector(".modal-thumb").innerHTML="",document.querySelector("body").classList.remove("overflow-hidden")}I(),h.classList.add("is-hidden__spinner"),f.addEventListener("click",q),b.addEventListener("click",q),L.addEventListener("click",(function(){S<=1||(S-=1,j())})),y.addEventListener("click",(function(){N<=S||(S=Number.parseInt(S)+1,j())})),x.addEventListener("click",(function(e){"BUTTON"===e.target.nodeName&&e.target.textContent&&"..."!==e.target.textContent&&(S=e.target.textContent,j())})),p.addEventListener("click",(function(e){return O.apply(this,arguments)})),document.querySelector("#modal-btn").addEventListener("click",(function(){return U()})),document.addEventListener("keydown",(function(e){"Escape"===e.code&&U()})),document.querySelector(".drop-box").addEventListener("click",(function(e){document.querySelector(".modal").contains(e.target)||U()}))}();
//# sourceMappingURL=librarypage.49b865d8.js.map
