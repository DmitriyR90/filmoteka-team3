function e(e,t,n,s){Object.defineProperty(e,t,{get:n,set:s,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){s[e]=t},t.parcelRequired7c6=i),i.register("kyEFX",(function(t,n){var s,i;e(t.exports,"register",(function(){return s}),(function(e){return s=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var o={};s=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},i=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("a79Io",(function(e,t){e.exports=new URL(i("kyEFX").resolve("iHCDC"),import.meta.url).toString()})),i("kyEFX").register(JSON.parse('{"5FICj":"librarypage.779612d1.js","iHCDC":"noposter.751b8d89.jpg","8mGr4":"index.edfb7e63.js"}')),i("hIzJZ");var o=i("25RCP"),r=i("9jUAk"),a=i("amyG6");(0,o.initializeApp)({apiKey:"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc",authDomain:"filmoteka-bdb19.firebaseapp.com",projectId:"filmoteka-bdb19",storageBucket:"filmoteka-bdb19.appspot.com",messagingSenderId:"1051248700372",appId:"1:1051248700372:web:2dc6796345cd1c6fa94441"});const l=(0,r.getFirestore)(),c=(0,a.getAuth)(),d=document.querySelector(".info"),u=document.querySelector(".movie-list"),m=document.querySelector(".queue-btn"),p=document.querySelector(".watched-btn"),b=document.querySelector(".loader"),g=document.querySelectorAll(".pagination-btn"),f=document.querySelector(".pagination-btn__main"),h=document.querySelector(".pagination-btn__arrow-left"),v=document.querySelector(".pagination-btn__arrow-right"),L=document.querySelector(".pagination-list"),I=document.querySelector(".pagination");let x=1,C=1;function N(){p.classList.add("active-btn"),m.classList.remove("active-btn"),(0,a.onAuthStateChanged)(c,(e=>{if(e){w(e.uid).then((e=>e)).then((e=>{let t=e.filmsWatched;if(C=Math.ceil(t.length/20),1!==C){let n=20*x,s=n-20;return console.log(n),t=e.filmsWatched.slice(s,n),k(t),console.log(C),I.classList.remove("is-stealth"),void q(x,C)}k(t),x=1,console.log(C),I.classList.remove("is-stealth"),q(x,C)}))}else console.log("user is logout")}))}function y(e){x=1,b.classList.remove("is-hidden__spinner"),e.target===p?(b.classList.add("is-hidden__spinner"),p.classList.add("active-btn"),m.classList.remove("active-btn")):e.target===m&&(p.classList.remove("active-btn"),m.classList.add("active-btn"),b.classList.add("is-hidden__spinner"));const t=e.target.id;(0,a.onAuthStateChanged)(c,(e=>{if(e){w(e.uid).then((e=>e)).then((e=>{let n=e[t];if(C=Math.ceil(n.length/20),1===C)S(n),x=1,console.log(C),I.classList.remove("is-stealth"),q(x,C);else{let s=20*x,i=s-20;console.log(s),n=e[t].slice(i,s),S(n),console.log(C),I.classList.remove("is-stealth"),q(x,C)}}))}else console.log("user is logout")}))}async function w(e){const t=await(0,r.getDoc)((0,r.doc)(l,"users",`${e}`));if(t.exists()){return t.data()}}function S(e){u.innerHTML="",e.length<1?d.classList.remove("is-stealth"):(d.classList.add("is-stealth"),_(e),I.classList.remove("is-stealth"),q(x,C))}function _(e){const t=e.map((({img:e,id:t,title:n,genres:s,date:o})=>`<li class="movie-item">\n                    <img class="movie-img" src="${function(e){let t=new Image;t.src=i("a79Io");let n=e;null!==e&&""!==e||(n=t.src);return n}(e)}" data-id="${t}" alt="${n}" width="280">\n                    <h2 class="movie-title">${n}</h2>\n                    <p class="movie-description">${function(e){if(""===e)return"Unknown genre";if(e.includes(",")){const t=e.split(",");return t.length>2?t.slice(0,2).join(", ")+", others...":t.join(", ")}return e}(s)} | ${o}</p>\n                </li>`)).join("");u.insertAdjacentHTML("beforeend",t)}function k(e){u.innerHTML="",0===e.length?d.classList.remove("is-stealth"):(d.classList.add("is-stealth"),_(e))}function q(e,t){g[0].textContent=Number.parseInt(e)-4>0?1:"",Number.parseInt(e)-3==1?g[1].textContent=1:Number.parseInt(e)-3>0?g[1].textContent="...":g[1].textContent="",g[2].textContent=Number.parseInt(e)-2>0?Number.parseInt(e)-2:"",g[3].textContent=Number.parseInt(e)-1>0?Number.parseInt(e)-1:"",f.textContent=Number.parseInt(e),g[5].textContent=Number.parseInt(e)+1<=Number.parseInt(t)?Number.parseInt(e)+1:"",g[6].textContent=Number.parseInt(e)+2<=Number.parseInt(t)?Number.parseInt(e)+2:"",Number.parseInt(e)+3===Number.parseInt(t)?g[7].textContent=Number.parseInt(t):Number.parseInt(e)+3<=Number.parseInt(t)?g[7].textContent="...":g[7].textContent="",g[8].textContent=Number.parseInt(e)+4<=Number.parseInt(t)?Number.parseInt(t):"",g[5].textContent?v.classList.remove("disabled"):v.classList.add("disabled"),g[3].textContent?h.classList.remove("disabled"):h.classList.add("disabled")}function E(){if(p.classList.contains("active-btn"))return N(),void window.scrollTo({top:0,behavior:"smooth"});p.classList.remove("active-btn"),m.classList.add("active-btn"),(0,a.onAuthStateChanged)(c,(e=>{e?w(e.uid).then((e=>e)).then((e=>{let t=e.filmsQueue;if(C=Math.ceil(t.length/20),1!==C){let n=20*x,s=n-20;return console.log(n),t=e.filmsQueue.slice(s,n),k(t),console.log(C),I.classList.remove("is-stealth"),void q(x,C)}k(t),x=1,console.log(C),I.classList.remove("is-stealth"),q(x,C)})):console.log("user is logout")})),window.scrollTo({top:0,behavior:"smooth"})}N(),b.classList.add("is-hidden__spinner"),m.addEventListener("click",y),p.addEventListener("click",y),h.addEventListener("click",(()=>{x<=1||(x-=1,E())})),v.addEventListener("click",(()=>{C<=x||(x=Number.parseInt(x)+1,E())})),L.addEventListener("click",(e=>{"BUTTON"===e.target.nodeName&&e.target.textContent&&"..."!==e.target.textContent&&(x=e.target.textContent,E())}));
//# sourceMappingURL=librarypage.779612d1.js.map
