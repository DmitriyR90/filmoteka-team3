{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-25914b32961f7b52.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-91b790a37d4dfcac.js","src/js/fb-renderLibrary.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = require('./helpers/bundle-url').getBundleURL('6rRUj') + require('./helpers/bundle-manifest').resolve(\"iXtly\");","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"6rRUj\\\":\\\"librarypage.a9daee60.js\\\",\\\"iXtly\\\":\\\"noposter.751b8d89.jpg\\\",\\\"iLoYJ\\\":\\\"index.fefccd89.js\\\"}\"));","import './modal-developers';\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, doc, setDoc, getDoc, exists, onSnapshot, updateDoc, arrayUnion, collection, query, where, getDocs  } from 'firebase/firestore/lite';\nimport { getAuth, \n    showLoginError, \n    onAuthStateChanged, \n    signInWithEmailAndPassword, \n    createUserWithEmailAndPassword, \n    AuthErrorCodes,\n    signOut,\n    setPersistence } from 'firebase/auth';\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc\",\n    authDomain: \"filmoteka-bdb19.firebaseapp.com\",\n    projectId: \"filmoteka-bdb19\",\n    storageBucket: \"filmoteka-bdb19.appspot.com\",\n    messagingSenderId: \"1051248700372\",\n    appId: \"1:1051248700372:web:2dc6796345cd1c6fa94441\"\n};\n    \nconst firebaseApp = initializeApp(firebaseConfig);\n    \nconst firestore = getFirestore(); //наша бд\n\nconst auth = getAuth();\n\n\nconst emptyInfo = document.querySelector('.info');\nconst movieListEl = document.querySelector('.movie-list');\nconst queueBtn = document.querySelector('.queue-btn');\nconst watchedBtn = document.querySelector('.watched-btn');\nconst loadSpinner = document.querySelector('.loader');\n\nrenderStartLibrary()\n\nloadSpinner.classList.add('is-hidden__spinner');\n\nqueueBtn.addEventListener('click', renderLibrary);\nwatchedBtn.addEventListener('click', renderLibrary);\n\nfunction renderStartLibrary() {\n    watchedBtn.classList.add('active-btn');\n    queueBtn.classList.remove('active-btn');\n\n    onAuthStateChanged(auth, (user) => {\n        if (user) {\n        // User is signed in, see docs for a list of available properties\n        const uid = user.uid;\n        //   Отримуємо дані з БД\n        const userData =  readTheDoc(uid).then(response => {\n           return response\n        }).then(data => {\n            const films = data.filmsWatched; // масив з фільмами\n            checkWatched(films);\n            \n        })\n\n       } else {\n        console.log('user is logout');\n        } \n})\n};\n\nfunction renderLibrary(e) {\nloadSpinner.classList.remove('is-hidden__spinner');\n  if (e.target === watchedBtn) {\n      loadSpinner.classList.add('is-hidden__spinner');\n    watchedBtn.classList.add('active-btn');\n    queueBtn.classList.remove('active-btn');\n    }\n    else if (e.target === queueBtn) {\n    watchedBtn.classList.remove('active-btn');\n    queueBtn.classList.add('active-btn');\n    loadSpinner.classList.add('is-hidden__spinner');\n    }\n   \n    const arrayName = e.target.id;\n\nonAuthStateChanged(auth, (user) => {\n        if (user) {\n        // User is signed in, see docs for a list of available properties\n        const uid = user.uid;\n        //   Отримуємо дані з БД\n        const userData =  readTheDoc(uid).then(response => {\n           return response\n        }).then(data => {\n            const filmsCollection = data[arrayName]; \n\n            console.log(filmsCollection);\n            checkMovie(filmsCollection);\n            \n        })\n\n       } else {\n        console.log('user is logout');\n        } \n})\n\n}\n\n//функція для отримання даних\nasync function readTheDoc (id) {\n    const myDoc = await getDoc(doc(firestore, 'users', `${id}`));\n        if (myDoc.exists()) {\n            const data = myDoc.data();\n            return data\n        } \n            \n};\n\n\n\nfunction checkMovie(collection) {\n \n  movieListEl.innerHTML = '';\n  if (collection.length < 1) {\n    emptyInfo.classList.remove(`is-stealth`);\n  } else {\n    emptyInfo.classList.add(`is-stealth`);\n    renderMovie(collection);\n  }\n}\n\nfunction renderMovie(collection) {\n  const markUpCards = collection\n    .map(({ img, id, title, genres, release_date }) => {\n      return `<li class=\"movie-item\">\n                    <img class=\"movie-img\" src=\"${createImg(\n                      img\n                    )}\" data-id=\"${id}\" alt=\"${title}\" width=\"280\">\n                    <h2 class=\"movie-title\">${title}</h2>\n                    <p class=\"movie-description\">${createGenresString(\n                      genres\n                    )} | ${checkAndCreateDate(release_date)}</p>\n                </li>`;\n    })\n    .join('');\n\n  // console.log(markUpCards);\n  movieListEl.insertAdjacentHTML('beforeend', markUpCards);\n}\n\n// function renderQueueMovie() {\n//   const markUpCards = queueMovie\n//     .map(({ img, id, title, genres, release_date }) => {\n//       return `<li class=\"movie-item\">\n//                     <img class=\"movie-img\" src=\"${createImg(\n//                       img\n//                     )}\" data-id=\"${id}\" alt=\"${title}\" width=\"280\">\n//                     <h2 class=\"movie-title\">${title}</h2>\n//                     <p class=\"movie-description\">${createGenresString(\n//                       genres\n//                     )} | ${checkAndCreateDate(release_date)}</p>\n//                 </li>`;\n//     })\n//     .join('');\n\n  // console.log(markUpCards);\n//   movieListEl.insertAdjacentHTML('beforeend', markUpCards);\n// }\n\nfunction createImg(img) {\n  let noposter = new Image();\n  noposter.src = require('../images/noposter.jpg');\n  let posterPath = img;\n  if (img === null || img === '') {\n    posterPath = noposter.src;\n  }\n  return posterPath;\n}\n\nfunction createGenresString(genres) {\n  if (genres === '') {\n    return 'Unknown genre';\n  }\n  if (genres.includes(',')) {\n    const genresArray = genres.split(',');\n    if (genresArray.length > 2) {\n      return genresArray.slice(0, 2).join(', ') + ', others...';\n    } else {\n      return genresArray.join(', ');\n    }\n  }\n  return genres;\n}\n\nfunction checkAndCreateDate(release_date) {\n  let date = 'Unknown date';\n  if (release_date) {\n    date = release_date.slice(0, 4);\n  }\n\n  return date;\n}\n\nfunction checkWatched(collection) {\n  watchedBtn.classList.add('active-btn');\n  queueBtn.classList.remove('active-btn');\n  movieListEl.innerHTML = '';\n  if (collection.length === 0) {\n    emptyInfo.classList.remove(`is-stealth`);\n  } else {\n    emptyInfo.classList.add(`is-stealth`);\n    renderMovie(collection);\n  }\n}"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","module","exports","parcelRequire","getBundleURL","resolve","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","register","JSON","parse","$bpxeT","$4140addf837e8020$var$firestore","$6Urw1","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","$c69b4","getFirestore","$4140addf837e8020$var$auth","$3SEMc","getAuth","$4140addf837e8020$var$emptyInfo","document","querySelector","$4140addf837e8020$var$movieListEl","$4140addf837e8020$var$queueBtn","$4140addf837e8020$var$watchedBtn","$4140addf837e8020$var$loadSpinner","$4140addf837e8020$var$renderLibrary","e","classList","remove","target","add","arrayName","onAuthStateChanged","user","$4140addf837e8020$var$readTheDoc","uid","then","response","data","collection1","filmsCollection","console","log","innerHTML","$4140addf837e8020$var$renderMovie","$4140addf837e8020$var$_readTheDoc","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","myDoc","getDoc","doc","concat","_ctx","sent","exists","collection2","markUpCards","map","param","img","title","genres","release_date","noposter","Image","src","posterPath","$4140addf837e8020$var$createImg","includes","genresArray","split","slice","join","$4140addf837e8020$var$createGenresString","date","$4140addf837e8020$var$checkAndCreateDate","insertAdjacentHTML","collection3","films","filmsWatched","addEventListener"],"version":3,"file":"librarypage.a9daee60.js.map"}