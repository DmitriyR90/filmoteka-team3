{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-4d16f9a35f7e589a.js","node_modules/@parcel/runtime-js/lib/runtime-5da31e5327f0958c.js","src/js/fb-renderLibrary.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"iHCDC\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5FICj\\\":\\\"librarypage.f5f944ff.js\\\",\\\"iHCDC\\\":\\\"noposter.751b8d89.jpg\\\",\\\"8mGr4\\\":\\\"index.8d61d521.js\\\"}\"));","import './modal-developers';\nimport { initializeApp } from 'firebase/app';\nimport {\n  getFirestore,\n  doc,\n  setDoc,\n  getDoc,\n  exists,\n  onSnapshot,\n  updateDoc,\n  arrayUnion,\n  arrayRemove,\n  collection,\n  query,\n  where,\n  getDocs,\n} from 'firebase/firestore/lite';\nimport {\n  getAuth,\n  showLoginError,\n  onAuthStateChanged,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  AuthErrorCodes,\n  signOut,\n  setPersistence,\n} from 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc',\n  authDomain: 'filmoteka-bdb19.firebaseapp.com',\n  projectId: 'filmoteka-bdb19',\n  storageBucket: 'filmoteka-bdb19.appspot.com',\n  messagingSenderId: '1051248700372',\n  appId: '1:1051248700372:web:2dc6796345cd1c6fa94441',\n};\n\nconst firebaseApp = initializeApp(firebaseConfig);\n\nconst firestore = getFirestore(); //наша бд\n\nconst auth = getAuth();\n\nconst emptyInfo = document.querySelector('.info');\nconst movieListEl = document.querySelector('.movie-list');\nconst queueBtn = document.querySelector('.queue-btn');\nconst watchedBtn = document.querySelector('.watched-btn');\nconst loadSpinner = document.querySelector('.loader');\nconst paginationBtn = document.querySelectorAll('.pagination-btn');\nconst mainPaginationBtn = document.querySelector('.pagination-btn__main');\nconst arrowLeftBtn = document.querySelector('.pagination-btn__arrow-left');\nconst arrowRightBtn = document.querySelector('.pagination-btn__arrow-right');\nconst paginationNumbers = document.querySelector('.pagination-list');\nconst pagination = document.querySelector('.pagination');\nlet pageNumber = 1;\nlet totalPages = 1;\nrenderStartLibrary();\n\nloadSpinner.classList.add('is-hidden__spinner');\n\nqueueBtn.addEventListener('click', renderLibrary);\nwatchedBtn.addEventListener('click', renderLibrary);\narrowLeftBtn.addEventListener('click', () => {\n  if (pageNumber <= 1) {\n    return;\n  }\n  pageNumber -= 1;\n\n  paginationPageChange();\n});\narrowRightBtn.addEventListener('click', () => {\n  if (totalPages <= pageNumber) {\n    return;\n  }\n  pageNumber = Number.parseInt(pageNumber) + 1;\n\n  paginationPageChange();\n});\npaginationNumbers.addEventListener('click', e => {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  if (e.target.textContent && e.target.textContent !== '...') {\n    pageNumber = e.target.textContent;\n\n    paginationPageChange();\n  }\n});\n\nfunction renderStartLibrary() {\n  watchedBtn.classList.add('active-btn');\n  queueBtn.classList.remove('active-btn');\n\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      // User is signed in, see docs for a list of available properties\n      const uid = user.uid;\n      //   Отримуємо дані з БД\n      const userData = readTheDoc(uid)\n        .then(response => {\n          return response;\n        })\n        .then(data => {\n          let films = data.filmsWatched;\n          if (films.length === 0) {\n            pagination.classList.add(`is-stealth`);\n            emptyInfo.classList.remove(`is-stealth`);\n            return;\n          } // масив з фільмами\n\n          // -----------\n          totalPages = Math.ceil(films.length / 20);\n          if (totalPages === 1) {\n            checkWatched(films);\n            pageNumber = 1;\n            // console.log(totalPages);\n            pagination.classList.remove(`is-stealth`);\n            puginationNumeration(pageNumber, totalPages);\n          } else {\n            let i = pageNumber * 20;\n            let j = i - 20;\n            // console.log(i);\n            films = data.filmsWatched.slice(j, i);\n            checkWatched(films);\n            // console.log(totalPages);\n            pagination.classList.remove(`is-stealth`);\n            puginationNumeration(pageNumber, totalPages);\n            return;\n          }\n          // ///////------\n          // checkWatched(films);\n          // totalPages = Math.ceil(films.length / 20);\n          // console.log(totalPages);\n          // pagination.classList.remove(`is-stealth`);\n          // puginationNumeration(pageNumber, totalPages);\n        });\n    } else {\n      console.log('user is logout');\n    }\n  });\n}\n\nfunction renderLibrary(e) {\n  pageNumber = 1;\n  loadSpinner.classList.remove('is-hidden__spinner');\n  if (e.target === watchedBtn) {\n    loadSpinner.classList.add('is-hidden__spinner');\n    watchedBtn.classList.add('active-btn');\n    queueBtn.classList.remove('active-btn');\n  } else if (e.target === queueBtn) {\n    watchedBtn.classList.remove('active-btn');\n    queueBtn.classList.add('active-btn');\n    loadSpinner.classList.add('is-hidden__spinner');\n  }\n\n  const arrayName = e.target.id;\n\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      // User is signed in, see docs for a list of available properties\n      const uid = user.uid;\n      //   Отримуємо дані з БД\n      const userData = readTheDoc(uid)\n        .then(response => {\n          return response;\n        })\n        .then(data => {\n          let filmsCollection = data[arrayName];\n          if (filmsCollection.length === 0) {\n            pagination.classList.add(`is-stealth`);\n            emptyInfo.classList.remove(`is-stealth`);\n            checkMovie(filmsCollection);\n            return;\n          }\n\n          // console.log(filmsCollection);\n\n          totalPages = Math.ceil(filmsCollection.length / 20);\n          if (totalPages === 1) {\n            checkMovie(filmsCollection);\n            pageNumber = 1;\n            console.log(totalPages);\n            pagination.classList.remove(`is-stealth`);\n            puginationNumeration(pageNumber, totalPages);\n          } else {\n            let i = pageNumber * 20;\n            let j = i - 20;\n            console.log(i);\n            filmsCollection = data[arrayName].slice(j, i);\n            checkMovie(filmsCollection);\n            console.log(totalPages);\n            pagination.classList.remove(`is-stealth`);\n            puginationNumeration(pageNumber, totalPages);\n          }\n        });\n    } else {\n      console.log('user is logout');\n    }\n  });\n}\n\n//функція для отримання даних\nasync function readTheDoc(id) {\n  const myDoc = await getDoc(doc(firestore, 'users', `${id}`));\n  if (myDoc.exists()) {\n    const data = myDoc.data();\n    return data;\n  }\n}\n\nfunction checkMovie(collection) {\n  movieListEl.innerHTML = '';\n  if (collection.length < 1) {\n    emptyInfo.classList.remove(`is-stealth`);\n    pagination.classList.add(`is-stealth`);\n    return;\n  } else {\n    emptyInfo.classList.add(`is-stealth`);\n    renderMovie(collection);\n    pagination.classList.remove(`is-stealth`);\n    puginationNumeration(pageNumber, totalPages);\n  }\n}\n\nfunction renderMovie(collection) {\n  const markUpCards = collection\n    .map(({ img, id, title, genres, date }) => {\n      return `<li class=\"movie-item\">\n                    <img class=\"movie-img\" src=\"${createImg(\n                      img\n                    )}\" data-id=\"${id}\" alt=\"${title}\" width=\"280\">\n                    <h2 class=\"movie-title\">${title}</h2>\n                    <p class=\"movie-description\">${createGenresString(\n                      genres\n                    )} | ${date}</p>\n                </li>`;\n    })\n    .join('');\n\n  // console.log(markUpCards);\n  movieListEl.insertAdjacentHTML('beforeend', markUpCards);\n}\n\n// function renderQueueMovie() {\n//   const markUpCards = queueMovie\n//     .map(({ img, id, title, genres, release_date }) => {\n//       return `<li class=\"movie-item\">\n//                     <img class=\"movie-img\" src=\"${createImg(\n//                       img\n//                     )}\" data-id=\"${id}\" alt=\"${title}\" width=\"280\">\n//                     <h2 class=\"movie-title\">${title}</h2>\n//                     <p class=\"movie-description\">${createGenresString(\n//                       genres\n//                     )} | ${checkAndCreateDate(release_date)}</p>\n//                 </li>`;\n//     })\n//     .join('');\n\n// console.log(markUpCards);\n//   movieListEl.insertAdjacentHTML('beforeend', markUpCards);\n// }\n\nfunction createImg(img) {\n  let noposter = new Image();\n  noposter.src = require('../images/noposter.jpg');\n  let posterPath = img;\n  if (img === null || img === '') {\n    posterPath = noposter.src;\n  }\n  return posterPath;\n}\n\nfunction createGenresString(genres) {\n  if (genres === '') {\n    return 'Unknown genre';\n  }\n  if (genres.includes(',')) {\n    const genresArray = genres.split(',');\n    if (genresArray.length > 2) {\n      return genresArray.slice(0, 2).join(', ') + ', others...';\n    } else {\n      return genresArray.join(', ');\n    }\n  }\n  return genres;\n}\n\nfunction checkWatched(collection) {\n  // watchedBtn.classList.add('active-btn');\n  // queueBtn.classList.remove('active-btn');\n  movieListEl.innerHTML = '';\n  if (collection.length === 0) {\n    emptyInfo.classList.remove(`is-stealth`);\n  } else {\n    emptyInfo.classList.add(`is-stealth`);\n    renderMovie(collection);\n  }\n}\n\nfunction puginationNumeration(currentPage, totalPages) {\n  paginationBtn[0].textContent = Number.parseInt(currentPage) - 4 > 0 ? 1 : '';\n\n  if (Number.parseInt(currentPage) - 3 === 1) {\n    paginationBtn[1].textContent = 1;\n  } else if (Number.parseInt(currentPage) - 3 > 0) {\n    paginationBtn[1].textContent = '...';\n  } else {\n    paginationBtn[1].textContent = '';\n  }\n  // paginationBtn[1].textContent = Number.parseInt(currentPage) - 3 > 0 ? Number.parseInt(currentPage) - 3 === 1 ? 1 : '...' : '';\n  paginationBtn[2].textContent =\n    Number.parseInt(currentPage) - 2 > 0\n      ? Number.parseInt(currentPage) - 2\n      : '';\n  paginationBtn[3].textContent =\n    Number.parseInt(currentPage) - 1 > 0\n      ? Number.parseInt(currentPage) - 1\n      : '';\n  mainPaginationBtn.textContent = Number.parseInt(currentPage);\n  paginationBtn[5].textContent =\n    Number.parseInt(currentPage) + 1 <= Number.parseInt(totalPages)\n      ? Number.parseInt(currentPage) + 1\n      : '';\n  paginationBtn[6].textContent =\n    Number.parseInt(currentPage) + 2 <= Number.parseInt(totalPages)\n      ? Number.parseInt(currentPage) + 2\n      : '';\n\n  if (Number.parseInt(currentPage) + 3 === Number.parseInt(totalPages)) {\n    paginationBtn[7].textContent = Number.parseInt(totalPages);\n  } else if (Number.parseInt(currentPage) + 3 <= Number.parseInt(totalPages)) {\n    paginationBtn[7].textContent = '...';\n  } else {\n    paginationBtn[7].textContent = '';\n  }\n  // paginationBtn[7].textContent = Number.parseInt(currentPage) + 4 <= Number.parseInt(totalPages) ? '...' : '';\n  paginationBtn[8].textContent =\n    Number.parseInt(currentPage) + 4 <= Number.parseInt(totalPages)\n      ? Number.parseInt(totalPages)\n      : '';\n\n  if (!paginationBtn[5].textContent) {\n    arrowRightBtn.classList.add('disabled');\n  } else {\n    arrowRightBtn.classList.remove('disabled');\n  }\n\n  if (!paginationBtn[3].textContent) {\n    arrowLeftBtn.classList.add('disabled');\n  } else {\n    arrowLeftBtn.classList.remove('disabled');\n  }\n}\n\nfunction paginationPageChange() {\n  if (watchedBtn.classList.contains('active-btn')) {\n    renderStartLibrary();\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n    return;\n  }\n  renderQueueLibrary();\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n\nfunction renderQueueLibrary() {\n  watchedBtn.classList.remove('active-btn');\n  queueBtn.classList.add('active-btn');\n\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      // User is signed in, see docs for a list of available properties\n      const uid = user.uid;\n      //   Отримуємо дані з БД\n      const userData = readTheDoc(uid)\n        .then(response => {\n          return response;\n        })\n        .then(data => {\n          let films = data.filmsQueue; // масив з фільмами\n          if (films.length === 0) {\n            pagination.classList.add(`is-stealth`);\n            emptyInfo.classList.remove(`is-stealth`);\n            return;\n          }\n          // -----------\n          totalPages = Math.ceil(films.length / 20);\n          if (totalPages === 1) {\n            checkWatched(films);\n            pageNumber = 1;\n            console.log(totalPages);\n            pagination.classList.remove(`is-stealth`);\n            puginationNumeration(pageNumber, totalPages);\n          } else {\n            let i = pageNumber * 20;\n            let j = i - 20;\n            console.log(i);\n            films = data.filmsQueue.slice(j, i);\n            checkWatched(films);\n            console.log(totalPages);\n            pagination.classList.remove(`is-stealth`);\n            puginationNumeration(pageNumber, totalPages);\n            return;\n          }\n        });\n    } else {\n      console.log('user is logout');\n    }\n  });\n}\n\n// ----------------Модальне вікно---------------------------------------------\n\nmovieListEl.addEventListener('click', showModal);\n\nasync function showModal(e) {\n  const movieId = e.target.dataset.id;\n\n  if (e.target.nodeName !== 'IMG') {\n    return;\n  }\n  document.querySelector('.drop-box').classList.remove('drop-box--is-hidden');\n  document.querySelector('.button-up').classList.add('is-hidden');\n\n  //   Отримуємо дані з БД\n\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      // User is signed in, see docs for a list of available properties\n      const uid = user.uid;\n      //   Отримуємо дані з БД\n      const userData = readTheDoc(uid)\n        .then(response => {\n          return response;\n        })\n        .then(data => {\n          let films;\n          if (watchedBtn.classList.contains('active-btn')) {\n            films = data.filmsWatched; // масив з фільмами\n\n            const mov = films.find(film => film.id === Number(movieId));\n\n            renderModalWatched(mov);\n            const watchedDeleteBtn = document.querySelector(\n              '#filmsWatchedDelete'\n            );\n            function delWatched() {\n              updateDoc(doc(firestore, 'users', uid), {\n                filmsWatched: arrayRemove(mov),\n              });\n            }\n            watchedDeleteBtn.addEventListener('click', delWatched);\n          } else if (queueBtn.classList.contains('active-btn')) {\n            films = data.filmsQueue; // масив з фільмами\n\n            const mov = films.find(film => film.id === Number(movieId));\n\n            renderModalQueue(mov);\n\n            function delQueue() {\n              updateDoc(doc(firestore, 'users', uid), {\n                filmsQueue: arrayRemove(mov),\n              });\n            }\n            const queueDeleteBtn = document.querySelector('#filmsQueueDelete');\n            queueDeleteBtn.addEventListener('click', delQueue);\n          }\n        });\n    } else {\n      console.log('user is logout');\n    }\n  });\n}\n\nfunction renderModalWatched(movie) {\n  document\n    .querySelector('.modal-thumb')\n    .insertAdjacentHTML('beforeend', createModalCardWatched(movie));\n  document.querySelector('body').classList.add('overflow-hidden');\n}\nfunction createModalCardWatched(movie) {\n  return `<img class=\"modal__img\" src=\"${movie.img}\" alt=\"\" width=\"240\">\n                <div class=\"modal__description-thumb\">\n                    <h2 class=\"modal__title\">${movie.title}</h2>\n                    <ul class=\"movie-data\">\n                        <li>\n                            <ul class=\"movie-data__name\">\n                                <li>Vote / Votes</li>\n                                <li>Popularity</li>\n                                <li>Original Title</li>\n                                <li>Genre</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <ul class=\"movie-data__content\">\n                                <li class=\"movie-data__item\">\n                                    <span class=\"movie-votes__first\">${movie.vote_average}</span> / <span class=\"movie-votes__sec\">${movie.vote_count}</span>\n                                </li>\n                                <li class=\"movie-data__item\">\n                                    <span class=\"movie-popularity__item\">${movie.popularity}</span>\n                                </li>\n                                <li class=\"movie-data__item\">\n                                    <span class=\"movie-orig-title__item\">${movie.original_title}</span>\n                                </li>\n                                <li class=\"movie-data__item\">\n                                    <span class=\"movie-genre__item\">\n                                      ${movie.genres}\n                                    </span>\n                                </li>\n                            </ul>\n                        </li>  \n                    </ul>\n                    \n                    <p class=\"movie-about\">About</p>\n                    <p class=\"movie-about-text\">${movie.overview}</p>\n                    <ul class=\"modal-btns\">\n                        <li class=\"modal-btns__item\">\n                            <button class=\"button add-watched-btn delete\" type=\"button\" id=\"filmsWatchedDelete\">Delete from Watched</button>\n                        </li>\n                        \n                    </ul>\n                </div>`;\n}\n\nfunction renderModalQueue(movie) {\n  document\n    .querySelector('.modal-thumb')\n    .insertAdjacentHTML('beforeend', createModalCardQueue(movie));\n  document.querySelector('body').classList.add('overflow-hidden');\n}\nfunction createModalCardQueue(movie) {\n  return `<img class=\"modal__img\" src=\"${movie.img}\" alt=\"\" width=\"240\">\n              <div class=\"modal__description-thumb\">\n                  <h2 class=\"modal__title\">${movie.title}</h2>\n                  <ul class=\"movie-data\">\n                      <li>\n                          <ul class=\"movie-data__name\">\n                              <li>Vote / Votes</li>\n                              <li>Popularity</li>\n                              <li>Original Title</li>\n                              <li>Genre</li>\n                          </ul>\n                      </li>\n                      <li>\n                          <ul class=\"movie-data__content\">\n                              <li class=\"movie-data__item\">\n                                  <span class=\"movie-votes__first\">${movie.vote_average}</span> / <span class=\"movie-votes__sec\">${movie.vote_count}</span>\n                              </li>\n                              <li class=\"movie-data__item\">\n                                  <span class=\"movie-popularity__item\">${movie.popularity}</span>\n                              </li>\n                              <li class=\"movie-data__item\">\n                                  <span class=\"movie-orig-title__item\">${movie.original_title}</span>\n                              </li>\n                              <li class=\"movie-data__item\">\n                                  <span class=\"movie-genre__item\">\n                                    ${movie.genres}\n                                  </span>\n                              </li>\n                          </ul>\n                      </li>  \n                  </ul>\n                  \n                  <p class=\"movie-about\">About</p>\n                  <p class=\"movie-about-text\">${movie.overview}</p>\n                  <ul class=\"modal-btns\">\n                      <li class=\"modal-btns__item\">\n                          <button class=\"button add-watched-btn delete\" type=\"button\" id=\"filmsQueueDelete\">Delete from queue</button>\n                      </li>\n                  </ul>\n              </div>`;\n}\nconst closeModalBtn = document.querySelector('#modal-btn');\nfunction closeModal() {\n  document.querySelector('.drop-box').classList.add('drop-box--is-hidden');\n  document.querySelector('.modal-thumb').innerHTML = '';\n  document.querySelector('body').classList.remove('overflow-hidden');\n  buttonUpEl.classList.remove('is-hidden');\n  // document.querySelector('.movie-list').removeEventListener('click', showModal);\n  // document.querySelector('#modal-btn').removeEventListener('click', closeModal);\n}\ncloseModalBtn.addEventListener('click', () => closeModal());\ndocument.addEventListener('keydown', e => {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n});\ndocument.querySelector('.drop-box').addEventListener('click', e => {\n  if (!document.querySelector('.modal').contains(e.target)) {\n    closeModal();\n  }\n});\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","module","exports","URL","parcelRequire","resolve","import","meta","url","toString","register","JSON","parse","$25RCP","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","$7bdaf10efafe7457$var$firestore","$9jUAk","getFirestore","$7bdaf10efafe7457$var$auth","$amyG6","getAuth","$7bdaf10efafe7457$var$emptyInfo","document","querySelector","$7bdaf10efafe7457$var$movieListEl","$7bdaf10efafe7457$var$queueBtn","$7bdaf10efafe7457$var$watchedBtn","$7bdaf10efafe7457$var$loadSpinner","$7bdaf10efafe7457$var$paginationBtn","querySelectorAll","$7bdaf10efafe7457$var$mainPaginationBtn","$7bdaf10efafe7457$var$arrowLeftBtn","$7bdaf10efafe7457$var$arrowRightBtn","$7bdaf10efafe7457$var$paginationNumbers","$7bdaf10efafe7457$var$pagination","$7bdaf10efafe7457$var$pageNumber","$7bdaf10efafe7457$var$totalPages","$7bdaf10efafe7457$var$renderStartLibrary","classList","add","remove","onAuthStateChanged","user","$7bdaf10efafe7457$var$readTheDoc","uid","then","response","data","films","filmsWatched","Math","ceil","j","slice","$7bdaf10efafe7457$var$checkWatched","$7bdaf10efafe7457$var$puginationNumeration","console","log","$7bdaf10efafe7457$var$renderLibrary","e","target","arrayName","filmsCollection","$7bdaf10efafe7457$var$checkMovie","async","myDoc","getDoc","doc","exists","collection1","innerHTML","$7bdaf10efafe7457$var$renderMovie","collection2","markUpCards","map","img","title","genres","date","noposter","Image","src","posterPath","$7bdaf10efafe7457$var$createImg","includes","genresArray","split","join","$7bdaf10efafe7457$var$createGenresString","insertAdjacentHTML","collection3","currentPage","totalPages1","textContent","Number","parseInt","$7bdaf10efafe7457$var$paginationPageChange","contains","window","scrollTo","top","behavior","filmsQueue","addEventListener","nodeName","movieId","dataset","mov","find","film","movie","vote_average","vote_count","popularity","original_title","overview","$7bdaf10efafe7457$var$createModalCardWatched","updateDoc","arrayRemove","$7bdaf10efafe7457$var$createModalCardQueue","$7bdaf10efafe7457$var$renderModalQueue","$7bdaf10efafe7457$var$closeModal","buttonUpEl","code"],"version":3,"file":"librarypage.f5f944ff.js.map"}